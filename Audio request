<mxfile host="app.diagrams.net" modified="2022-09-26T07:31:56.112Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36" etag="L4xiaI1KgKHaXTnzoQlL" version="20.3.6" type="github">
  <diagram id="D8ul5N0OovFoYIRCELP1" name="Page-1">
    <mxGraphModel dx="5002" dy="1956" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-8" value="" style="shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-750" y="790" width="20" height="1410" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-11" value="new AptivCarAudio()" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-8" target="aYk2iFM8JKrl7SbE10ZM-9">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="10" y="70" as="sourcePoint" />
            <mxPoint x="170" y="70" as="targetPoint" />
            <Array as="points">
              <mxPoint x="90" y="70" />
              <mxPoint x="90" y="70" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-12" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-11">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-9" value="AptivCarAudio" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-670" y="790" width="100" height="1410" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-15" value="(AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-9" target="aYk2iFM8JKrl7SbE10ZM-10">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="50" y="100" as="sourcePoint" />
            <mxPoint x="210" y="100" as="targetPoint" />
            <Array as="points">
              <mxPoint x="130" y="100" />
              <mxPoint x="130" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-16" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-15">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-10" value="AudioManager" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-510" y="790" width="100" height="1440" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-124" value="成员变量mAudioFocusDispatcher" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-10" target="aYk2iFM8JKrl7SbE10ZM-30">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="70" as="sourcePoint" />
            <mxPoint x="130" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-20" value="" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-740" y="940" as="sourcePoint" />
            <mxPoint x="-620" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-21" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-20">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-22" value="requestAudioFocus(AudioFocusRequest focusRequest)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-20">
          <mxGeometry x="-0.7933" y="1" relative="1" as="geometry">
            <mxPoint x="48" y="11" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-23" value="requestAudioFocus(AudioFocusRequest afr, AudioPolicy ap)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-620" y="980" as="sourcePoint" />
            <mxPoint x="-470" y="980" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-530" y="980" />
              <mxPoint x="-530" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-24" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-23">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-25" value="AudioService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="230" y="790" width="100" height="1720" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-30" value="AudioManager.IAudioFocusDispatcher" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-320" y="790" width="220" height="1440" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-37" value="new BlockingFocusResultReceiver(clientId)" style="endArrow=block;endFill=1;html=1;align=left;verticalAlign=top;rounded=0;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-30">
          <mxGeometry x="-0.9601" y="-11" relative="1" as="geometry">
            <mxPoint x="-140.67647058823536" y="388.81999999999994" as="sourcePoint" />
            <mxPoint x="394.5" y="388.81999999999994" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-38" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-37">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-43" value="创建并将其保存在map中，之后音源请求成功会通过AudioFocusDispatcher接口回调结果" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-37">
          <mxGeometry x="-0.5348" y="1" relative="1" as="geometry">
            <mxPoint x="136" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-179" value="focusReceiver.notifyResult(requestResult);" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-30" target="aYk2iFM8JKrl7SbE10ZM-31">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="110" y="1090" as="sourcePoint" />
            <mxPoint x="190" y="1090" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-31" value="AudioManager.BlockingFocusResultReceiver" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-50" y="790" width="250" height="1450" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-183" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-31">
          <mxGeometry x="120" y="1170" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-35" value="&lt;div&gt;requestAudioFocus(AudioAttributes aa, int durationHint, IBinder cb,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IAudioFocusDispatcher fd, String clientId, String callingPackageName, int flags,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IAudioPolicyCallback pcb, int sdk)&lt;/div&gt;" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-10" target="aYk2iFM8JKrl7SbE10ZM-25">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-460" y="1040" as="sourcePoint" />
            <mxPoint x="-300" y="1040" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-170" y="1030" />
              <mxPoint x="280" y="1030" />
              <mxPoint x="280" y="1030" />
              <mxPoint x="-170" y="1030" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-36" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-35">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-42" value="向AudioService请求音源" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-35">
          <mxGeometry x="-0.5233" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-44" value="MediaFocusControl" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="465" y="790" width="115" height="480" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-125" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry x="52.5" y="440" width="7.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-126" value="&lt;div&gt;notifyExtFocusPolicyFocusRequest_syncAf(AudioFocusInfo afi,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IAudioFocusDispatcher fd, IBinder cb)&amp;nbsp;&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;fontColor=#000000;" edge="1" target="aYk2iFM8JKrl7SbE10ZM-125" parent="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="410" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="85" y="410" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-176" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry x="52.5" y="350" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-177" value="&lt;div&gt;mFocusOwnersForFocusPolicy.put(afi.getClientId(),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; new FocusRequester(afi, fd, cb, hdlr, this));&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;fontColor=#000000;" edge="1" target="aYk2iFM8JKrl7SbE10ZM-176" parent="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry x="0.3315" y="17" relative="1" as="geometry">
            <mxPoint x="57.5" y="330" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="87.5" y="330" />
            </Array>
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-49" value="&lt;div&gt;int requestAudioFocus(AudioAttributes aa, int focusChangeHint, IBinder cb,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IAudioFocusDispatcher fd, String clientId, String callingPackageName, int flags,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; int sdk, boolean forceDuck)&lt;/div&gt;" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1" target="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="280" y="1070" as="sourcePoint" />
            <mxPoint x="440" y="1070" as="targetPoint" />
            <Array as="points">
              <mxPoint x="450" y="1070" />
              <mxPoint x="450" y="1070" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-50" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-49">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-51" value="name" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1" target="aYk2iFM8JKrl7SbE10ZM-44">
          <mxGeometry x="-0.771" y="10" relative="1" as="geometry">
            <mxPoint x="280" y="860" as="sourcePoint" />
            <mxPoint x="440" y="860" as="targetPoint" />
            <Array as="points">
              <mxPoint x="280" y="880" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-52" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-51">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-53" value="构造函数里面创建了MediaFocusControl" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-51">
          <mxGeometry x="-0.7532" y="7" relative="1" as="geometry">
            <mxPoint x="98" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-54" value="&lt;span style=&quot;color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px;&quot;&gt;AudioPolicy&lt;/span&gt;.&lt;span style=&quot;color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px;&quot;&gt;IAudioPolicyCallback(&lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; background-color: rgb(40, 44, 52);&quot;&gt;AudioPolicy.&lt;/span&gt;&lt;span style=&quot;color: rgb(224, 108, 117); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px;&quot;&gt;mPolicyCb)&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="665" y="790" width="430" height="630" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-55" target="aYk2iFM8JKrl7SbE10ZM-56">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-590" y="130" />
              <mxPoint x="-590" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-60" value="new IAptivCarImpl" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-57">
          <mxGeometry x="0.1351" relative="1" as="geometry">
            <mxPoint x="-7" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-55" value="AptivCarService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-750" y="20" width="100" height="420" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-56" target="aYk2iFM8JKrl7SbE10ZM-58">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-360" y="170" />
              <mxPoint x="-360" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-56" value="IAptivCarImpl(aptivcar_service)" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-570" y="20" width="190" height="420" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-74" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-58" target="aYk2iFM8JKrl7SbE10ZM-73">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-80" y="220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-58" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e06c75;&quot;&gt;AptivCarAudioService&lt;/span&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-350" y="20" width="190" height="490" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-61" value="name" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-55" target="aYk2iFM8JKrl7SbE10ZM-56">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-640" y="220" as="sourcePoint" />
            <mxPoint x="-480" y="170" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-470" y="230" />
              <mxPoint x="-560" y="220" />
              <mxPoint x="-560" y="220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-62" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#000000;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-61">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-63" value="init()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-61">
          <mxGeometry x="-0.6295" y="-3" relative="1" as="geometry">
            <mxPoint x="68" y="-13" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-68" value="构造方法中创建AptivCarAudioService" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-450" y="140" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-70" value="name" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-56" target="aYk2iFM8JKrl7SbE10ZM-58">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-470" y="250" as="sourcePoint" />
            <mxPoint x="-310" y="250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-370" y="280" />
              <mxPoint x="-370" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-71" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#000000;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-70">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-72" value="init()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-70">
          <mxGeometry x="-0.0896" y="4" relative="1" as="geometry">
            <mxPoint y="-6" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-73" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #61afef;&quot;&gt;AptivAudioFocus&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-140" y="20" width="190" height="530" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-82" value="创建AudioCalibration" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-73">
          <mxGeometry x="40.5" y="250" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-75" value="在构造方法中创建AptivAudioFocus" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-73">
          <mxGeometry x="-110" y="170" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-90" value="mAptivAudioFocus.init(mAptivAudioEffect)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-73">
          <mxGeometry x="-120" y="360" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-133" value="构造函数的时候创建" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-73" target="aYk2iFM8JKrl7SbE10ZM-132">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="90" y="110" as="sourcePoint" />
            <mxPoint x="349.5" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-78" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;AudioCalibration&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="20" width="250" height="520" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-100" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;创建AudioPolicy，setAudioPolicyFocusListener(mSystemFocusListener)&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;fontColor=#000000;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-78">
          <mxGeometry x="-130" y="390" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-79" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #61afef;&quot;&gt;AptivAudioEffect&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="645" y="20" width="190" height="520" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-80" value="" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-58" target="aYk2iFM8JKrl7SbE10ZM-78">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-200" y="320" as="sourcePoint" />
            <mxPoint x="-40" y="320" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-50" y="310" />
              <mxPoint x="-50" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-81" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#FFFFFF;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-80">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="16" y="-30" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-83" value="" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-58" target="aYk2iFM8JKrl7SbE10ZM-79">
          <mxGeometry x="-0.9531" y="-10" relative="1" as="geometry">
            <mxPoint x="-205" y="350" as="sourcePoint" />
            <mxPoint x="215" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="530" y="360" />
              <mxPoint x="530" y="360" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-84" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#FFFFFF;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-83">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="5" y="-40" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-85" value="创建AptivAudioEffect" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-83">
          <mxGeometry x="-0.1012" y="8" relative="1" as="geometry">
            <mxPoint x="-12" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-86" value="" style="endArrow=block;endFill=1;html=1;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-58" target="aYk2iFM8JKrl7SbE10ZM-73">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-210" y="420" as="sourcePoint" />
            <mxPoint x="10" y="420" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-90" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-87" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#FFFFFF;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-86">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-95" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;AudioPolicy&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="845" y="20" width="190" height="520" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-96" value="" style="endArrow=block;endFill=1;html=1;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-73" target="aYk2iFM8JKrl7SbE10ZM-95">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint y="460" as="sourcePoint" />
            <mxPoint x="160" y="460" as="targetPoint" />
            <Array as="points">
              <mxPoint x="140" y="440" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-97" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#FFFFFF;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-96">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-98" value="" style="endArrow=block;endFill=1;html=1;align=left;verticalAlign=top;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-73" target="aYk2iFM8JKrl7SbE10ZM-103">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="4.0714285714284415" y="530" as="sourcePoint" />
            <mxPoint x="1244.5" y="530" as="targetPoint" />
            <Array as="points">
              <mxPoint x="340" y="530" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-99" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;strokeColor=#FFFFFF;fontColor=#000000;fillColor=#FFFFFF;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-98">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-101" value="mAudioManager.registerAudioPolicy(mAudioPolicy)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-98">
          <mxGeometry x="-0.1025" y="9" relative="1" as="geometry">
            <mxPoint x="23" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-103" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e06c75;&quot;&gt;AudioManager&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1320" y="20" width="190" height="670" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-116" value="&lt;div&gt;registerAudioPolicy(policy.getConfig(), policy.cb(),policy.hasFocusListener(), policy.isFocusPolicy(), policy.isVolumeController());&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-103" target="aYk2iFM8JKrl7SbE10ZM-115">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="90" y="560" as="sourcePoint" />
            <mxPoint x="180" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-104" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;IAudioPolicyCallback&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1095" y="20" width="190" height="520" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-114" value="创建IAudioPolicyCallback -- cb()" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-95" target="aYk2iFM8JKrl7SbE10ZM-104">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="975" y="480" as="sourcePoint" />
            <mxPoint x="1015" y="480" as="targetPoint" />
            <Array as="points">
              <mxPoint x="995" y="470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-115" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;AudioService&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1520" y="20" width="190" height="670" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-121" value="构造函数中，new MediaFocusControl(mContext, mPlaybackMonitor)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="aYk2iFM8JKrl7SbE10ZM-115" target="aYk2iFM8JKrl7SbE10ZM-119">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="100" y="140" as="sourcePoint" />
            <mxPoint x="180" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-117" value="&lt;div style=&quot;background-color: rgb(40, 44, 52); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px;&quot;&gt;AudioService.&lt;/span&gt;&lt;font face=&quot;Droid Sans Mono, monospace, monospace&quot; color=&quot;#e5c07b&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;AudioPolicyProxy&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1720" y="20" width="260" height="730" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-118" value="&lt;div&gt;new AudioPolicyProxy(policyConfig, pcb, hasFocusListener,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; isFocusPolicy, isVolumeController)&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-115" target="aYk2iFM8JKrl7SbE10ZM-117">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1795" y="700" as="sourcePoint" />
            <mxPoint x="1934.5" y="640" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1715" y="640" />
              <mxPoint x="1845" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-119" value="&lt;div style=&quot;background-color: rgb(40, 44, 52); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: rgb(171, 178, 191); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;MediaFocusControl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="2030" y="20" width="270" height="700" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-122" value="mMediaFocusControl.setFocusPolicy(mPolicyCallback);" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-117" target="aYk2iFM8JKrl7SbE10ZM-119">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1933.833333333334" y="690" as="sourcePoint" />
            <mxPoint x="2130" y="690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2135" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-127" value="mFocusPolicy.notifyAudioFocusRequest(afi, AudioManager.AUDIOFOCUS_REQUEST_GRANTED);" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;exitX=0.333;exitY=0.571;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-125" target="aYk2iFM8JKrl7SbE10ZM-54">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="530" y="1200" as="sourcePoint" />
            <mxPoint x="830" y="1170" as="targetPoint" />
            <Array as="points">
              <mxPoint x="570" y="1270" />
              <mxPoint x="770" y="1270" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-129" value="AptivAudioFocus.SystemFocusListener(AudioPolicyFocusListener)" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1110" y="790" width="360" height="830" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-132" value="AptivAudioFocus.SystemFocusListener(AudioPolicyFocusListener)" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="20" width="360" height="590" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-134" value="onAudioFocusRequest((AudioFocusInfo) msg.obj, msg.arg1)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-54" target="aYk2iFM8JKrl7SbE10ZM-129">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1100" y="1120" as="sourcePoint" />
            <mxPoint x="1180" y="1120" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1150" y="1260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-136" value="&lt;div style=&quot;background-color: rgb(40, 44, 52); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px;&quot;&gt;AptivAudioFocus.&lt;/span&gt;&lt;font face=&quot;Droid Sans Mono, monospace, monospace&quot; color=&quot;#61afef&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;AptivAudioFocusChangeHandler&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1480" y="790" width="390" height="840" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-141" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-129" target="aYk2iFM8JKrl7SbE10ZM-136">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1330" y="1180" as="sourcePoint" />
            <mxPoint x="1410" y="1180" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1390" y="1310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-142" value="handleFocusRequest(AudioFocusInfo afi, int requestResult)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1310" y="1275" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-143" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;AptivAudioFocus&lt;/span&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1900" y="790" width="140" height="1410" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-170" value="pushIntoFocusStack，如果请求音源，没有失败，则添加到mFocusStack中" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;fontColor=#000000;" edge="1" target="aYk2iFM8JKrl7SbE10ZM-169" parent="aYk2iFM8JKrl7SbE10ZM-143">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="75" y="800" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="105" y="800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-169" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-143">
          <mxGeometry x="70" y="820" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-167" value="AptivFocusRequester fr = getFocusRequesterFromStacks(clientId)，判断请求的音源是否已经请求过" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;fontColor=#000000;" edge="1" target="aYk2iFM8JKrl7SbE10ZM-166" parent="aYk2iFM8JKrl7SbE10ZM-143">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="65" y="600" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="95" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-166" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-143">
          <mxGeometry x="60" y="620" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-144" value="doHandleCarFocusRequest(AudioFocusInfo afi, int requestResult)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-136" target="aYk2iFM8JKrl7SbE10ZM-143">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1740" y="1370" as="sourcePoint" />
            <mxPoint x="1820" y="1370" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1860" y="1370" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-145" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #e5c07b;&quot;&gt;AptivFocusRequester&lt;/span&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;strokeColor=#000000;fontColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="2070" y="790" width="370" height="920" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-147" value="new AptivFocusRequester(afi, mAudioPolicy, this);如果没有则创建新的请求" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-143" target="aYk2iFM8JKrl7SbE10ZM-145">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1880" y="1290" as="sourcePoint" />
            <mxPoint x="1960" y="1290" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2080" y="1470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-171" value="identifyFocusGrant(nfr)，如果mFocusStack不为空，说明当前有应用占着音源，需要判断请求的类型是否可以抢占" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-143" target="aYk2iFM8JKrl7SbE10ZM-145">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="2045" y="1530" as="sourcePoint" />
            <mxPoint x="2125" y="1530" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2060" y="1530" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-172" value="&lt;div&gt;setFocusRequestResult(AudioFocusInfo afi,&lt;/div&gt;&lt;div&gt;int requestResult,AudioPolicy ap) 将请求的结果返回设置回去&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-143" target="aYk2iFM8JKrl7SbE10ZM-10">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1870" y="1600" as="sourcePoint" />
            <mxPoint x="1360" y="1690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1420" y="1680" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-173" value="mMediaFocusControl.setFocusRequestResultFromExtPolicy(afi, requestResult);" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-10" target="aYk2iFM8JKrl7SbE10ZM-25">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="-120" y="1760" as="sourcePoint" />
            <mxPoint x="-40" y="1760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="80" y="1740" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-178" value="dispatchFocusResultFromExtPolicy(int requestResult, String clientId)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;fontColor=#000000;" edge="1" parent="1" source="aYk2iFM8JKrl7SbE10ZM-25" target="aYk2iFM8JKrl7SbE10ZM-30">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="-40" y="1890" as="sourcePoint" />
            <mxPoint x="40" y="1890" as="targetPoint" />
            <Array as="points">
              <mxPoint x="130" y="1810" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-39" value="focusReceiver.waitForResult(EXT_FOCUS_POLICY_TIMEOUT_MS);" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;rounded=0;" edge="1" parent="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-460" y="1240" as="sourcePoint" />
            <mxPoint x="74.5" y="1240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-90" y="1240" />
              <mxPoint x="-90" y="1240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-40" value="1" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" connectable="0" vertex="1" parent="aYk2iFM8JKrl7SbE10ZM-39">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-41" value="这边等待音源的请求结果" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="aYk2iFM8JKrl7SbE10ZM-39">
          <mxGeometry x="-0.725" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-184" value="focusReceiver.requestResult()" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;fontColor=#000000;" edge="1" target="aYk2iFM8JKrl7SbE10ZM-183" parent="1" source="aYk2iFM8JKrl7SbE10ZM-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint y="1960" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYk2iFM8JKrl7SbE10ZM-185" value="返回音源请求结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;fontColor=#000000;" edge="1" source="aYk2iFM8JKrl7SbE10ZM-183" parent="1" target="aYk2iFM8JKrl7SbE10ZM-8">
          <mxGeometry relative="1" as="geometry">
            <mxPoint y="2036" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
